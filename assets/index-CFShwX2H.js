import{r as ee,a as te,g as se}from"./vendor-react-B9D_A6Vq.js";import{r as c,R as ae,L as ie,C as ne,X as oe,Y as re,T as le,a as de,b as ce}from"./vendor-charts-BL99tiuk.js";import{T as S,G as F}from"./vendor-gemini-CEkpfZZc.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&d(h)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var I={exports:{}},C={};var L;function he(){if(L)return C;L=1;var s=ee(),o=Symbol.for("react.element"),t=Symbol.for("react.fragment"),d=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function h(u,a,g){var x,f={},b=null,N=null;g!==void 0&&(b=""+g),a.key!==void 0&&(b=""+a.key),a.ref!==void 0&&(N=a.ref);for(x in a)d.call(a,x)&&!r.hasOwnProperty(x)&&(f[x]=a[x]);if(u&&u.defaultProps)for(x in a=u.defaultProps,a)f[x]===void 0&&(f[x]=a[x]);return{$$typeof:o,type:u,key:b,ref:N,props:f,_owner:n.current}}return C.Fragment=t,C.jsx=h,C.jsxs=h,C}var E;function me(){return E||(E=1,I.exports=he()),I.exports}var e=me(),R={},_;function ue(){if(_)return R;_=1;var s=te();return R.createRoot=s.createRoot,R.hydrateRoot=s.hydrateRoot,R}var xe=ue();const ge=se(xe);var be={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const pe=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),p=(s,o)=>{const t=c.forwardRef(({color:d="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:h,className:u="",children:a,...g},x)=>c.createElement("svg",{ref:x,...be,width:n,height:n,stroke:d,strokeWidth:h?Number(r)*24/Number(n):r,className:["lucide",`lucide-${pe(s)}`,u].join(" "),...g},[...o.map(([f,b])=>c.createElement(f,b)),...Array.isArray(a)?a:[a]]));return t.displayName=`${s}`,t};const P=p("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const K=p("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);const q=p("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const fe=p("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ye=p("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const je=p("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const ve=p("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);const Ne=p("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const we=p("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const B=p("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);const ke=p("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Se=p("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Ce=p("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);const A=p("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Re=p("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const $=p("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var y=(s=>(s[s.Great=5]="Great",s[s.Good=4]="Good",s[s.Neutral=3]="Neutral",s[s.Bad=2]="Bad",s[s.Terrible=1]="Terrible",s))(y||{});const J={[y.Great]:"Great",[y.Good]:"Good",[y.Neutral]:"Okay",[y.Bad]:"Low",[y.Terrible]:"Terrible"},z={[y.Great]:"bg-emerald-500",[y.Good]:"bg-teal-400",[y.Neutral]:"bg-slate-400",[y.Bad]:"bg-orange-400",[y.Terrible]:"bg-rose-500"},G=["All-or-Nothing Thinking","Overgeneralization","Mental Filter","Disqualifying the Positive","Jumping to Conclusions","Magnification (Catastrophizing)","Emotional Reasoning","Should Statements","Labeling","Personalization"];new Date(Date.now()-864e5*2).toISOString(),y.Bad,new Date(Date.now()-864e5*1).toISOString(),y.Terrible;const Te={type:S.OBJECT,properties:{identifiedDistortions:{type:S.ARRAY,items:{type:S.STRING},description:"List of cognitive distortions identified in the thought (e.g., Catastrophizing, All-or-nothing thinking)."},suggestion:{type:S.STRING,description:"A gentle, objective re-framing of the negative thought based on CBT principles."},encouragement:{type:S.STRING,description:"A short, empathetic message validating the user's feelings."}},required:["identifiedDistortions","suggestion","encouragement"]},W=()=>{const s=localStorage.getItem("gemini_api_key");return s||""},Ie=async(s,o)=>{try{const t=W();if(!t)throw console.warn("No API Key available"),new Error("API Key missing");const d=new F({apiKey:t}),n=`
      You are an expert CBT (Cognitive Behavioral Therapy) assistant. 
      Analyze the following user entry.
      
      Situation: ${s}
      Automatic Negative Thought: ${o}
      
      Identify any cognitive distortions present.
      Suggest a more balanced perspective (a "Balanced Thought").
      Provide a brief encouraging remark.
      
      Keep the tone empathetic, non-judgmental, and professional.
    `,h=(await d.models.generateContent({model:"gemini-2.5-flash",contents:n,config:{responseMimeType:"application/json",responseSchema:Te,systemInstruction:"You are a supportive mental health aid using CBT techniques. Never diagnose."}})).text;if(!h)throw new Error("No response from AI");const u=h.indexOf("{"),a=h.lastIndexOf("}");if(u===-1||a===-1)throw new Error("Invalid JSON response format");const g=h.substring(u,a+1);return JSON.parse(g)}catch(t){return console.error("Gemini Analysis Error:",t),{identifiedDistortions:["Could not analyze at this time."],suggestion:"Try to look for evidence that contradicts your negative thought.",encouragement:"It takes courage to examine your thoughts. Keep going."}}},Ae=async s=>{try{const o=W();return o&&(await new F({apiKey:o}).models.generateContent({model:"gemini-2.5-flash",contents:`Generate a single, short, reflective journal prompt for someone feeling ${s}. 
      The prompt should be gentle and open-ended. Do not use quotes. Just the question.`})).text||"What is on your mind today?"}catch{return"What is one thing you are grateful for today?"}},ze=({onSave:s,onCancel:o})=>{const[t,d]=c.useState(1),[n,r]=c.useState(!1),[h,u]=c.useState(""),[a,g]=c.useState(y.Neutral),[x,f]=c.useState(50),[b,N]=c.useState(""),[l,m]=c.useState(""),[j,V]=c.useState(""),[T,O]=c.useState(""),[D,M]=c.useState([]),[w,Y]=c.useState(null),U=async()=>{if(!(!h||!b)){r(!0);try{const i=await Ie(h,b);Y(i);const v=G.filter(k=>i.identifiedDistortions.some(Q=>Q.toLowerCase().includes(k.toLowerCase())));v.length>0&&M(k=>Array.from(new Set([...k,...v])))}catch(i){console.error(i)}finally{r(!1)}}},X=()=>{const i={id:Date.now().toString(),date:new Date().toISOString(),situation:h,mood:a,moodIntensity:x,automaticThought:b,evidenceFor:l,evidenceAgainst:j,cognitiveDistortions:D,balancedThought:T,aiAnalysis:w||void 0};s(i)},Z=()=>e.jsx("div",{className:"flex items-center justify-between mb-8 px-4",children:[1,2,3].map(i=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors
            ${t>=i?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:i}),i<3&&e.jsx("div",{className:`w-12 h-1 mx-2 ${t>i?"bg-blue-600":"bg-slate-200"}`})]},i))});return e.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden flex flex-col min-h-[600px]",children:[e.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-100",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"New Thought Record"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Challenge negative thinking patterns using CBT."})]}),e.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[Z(),t===1&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"1. The Situation"}),e.jsx("textarea",{className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-none h-24 text-slate-800",placeholder:"Where were you? What happened? (e.g., 'Received a vague email from boss')",value:h,onChange:i=>u(i.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-4",children:"2. How did you feel?"}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:Object.entries(J).map(([i,v])=>{const k=Number(i);return e.jsx("button",{onClick:()=>g(k),className:`p-2 rounded-lg text-sm font-medium transition-all ${a===k?"bg-blue-100 text-blue-700 ring-2 ring-blue-500":"bg-slate-50 text-slate-600 hover:bg-slate-100"}`,children:v},i)})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Intensity"}),e.jsxs("span",{children:[x,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:x,onChange:i=>f(Number(i.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-600"})]})]})]}),t===2&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"3. Automatic Negative Thought"}),e.jsx("textarea",{className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none resize-none h-24 text-slate-800",placeholder:"What went through your mind? (e.g., 'I am going to get fired')",value:b,onChange:i=>N(i.target.value)})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h4",{className:"text-sm font-semibold text-indigo-900 flex items-center gap-2",children:[e.jsx(A,{size:16})," AI Insight"]}),!w&&e.jsx("button",{onClick:U,disabled:!h||!b||n,className:"text-xs bg-indigo-600 text-white px-3 py-1.5 rounded-full hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2 transition-colors",children:n?e.jsx(Ne,{size:12,className:"animate-spin"}):"Analyze Thought"})]}),!w&&!n&&e.jsx("p",{className:"text-xs text-indigo-700",children:"Describe your situation and thought, then ask Gemini to help identify cognitive distortions."}),w&&e.jsxs("div",{className:"space-y-3 mt-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-indigo-100 shadow-sm",children:[e.jsx("span",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Potential Distortions"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:w.identifiedDistortions.map((i,v)=>e.jsx("span",{className:"bg-rose-100 text-rose-700 px-2 py-0.5 rounded text-xs font-medium",children:i},v))})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-indigo-100 shadow-sm",children:[e.jsx("span",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1",children:"Perspective Shift"}),e.jsxs("p",{className:"text-slate-700 italic",children:['"',w.suggestion,'"']})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Select Distortions (Optional)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:G.map(i=>e.jsx("button",{onClick:()=>M(v=>v.includes(i)?v.filter(k=>k!==i):[...v,i]),className:`px-3 py-1.5 rounded-full text-xs border transition-colors ${D.includes(i)?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-600 border-slate-200 hover:border-slate-300"}`,children:i},i))})]})]}),t===3&&e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2 text-green-700",children:"Evidence For Thought"}),e.jsx("textarea",{className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none resize-none h-32 text-sm text-slate-800",placeholder:"Facts that support the negative thought...",value:l,onChange:i=>m(i.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2 text-rose-700",children:"Evidence Against Thought"}),e.jsx("textarea",{className:"w-full p-3 border border-slate-200 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 outline-none resize-none h-32 text-sm text-slate-800",placeholder:"Facts that contradict the negative thought...",value:j,onChange:i=>V(i.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"5. Balanced Thought"}),w&&!T&&e.jsxs("button",{onClick:()=>O(w.suggestion),className:"text-xs text-blue-600 hover:text-blue-800 mb-2 flex items-center gap-1",children:[e.jsx(A,{size:12})," Use AI suggestion"]}),e.jsx("textarea",{className:"w-full p-3 border-2 border-blue-100 bg-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none h-24 text-slate-800",placeholder:"Considering the evidence, what is a more realistic way to view the situation?",value:T,onChange:i=>O(i.target.value)})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-between items-center",children:[e.jsx("button",{onClick:o,className:"text-slate-500 hover:text-slate-800 font-medium px-4 py-2 rounded-lg hover:bg-slate-200 transition-colors",children:"Cancel"}),e.jsxs("div",{className:"flex gap-3",children:[t>1&&e.jsx("button",{onClick:()=>d(t-1),className:"px-4 py-2 rounded-lg border border-slate-300 text-slate-700 font-medium hover:bg-white transition-colors",children:"Back"}),t<3?e.jsx("button",{onClick:()=>d(t+1),disabled:t===1&&!h||t===2&&!b,className:"px-6 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-200",children:"Next"}):e.jsxs("button",{onClick:X,className:"px-6 py-2 rounded-lg bg-emerald-600 text-white font-medium hover:bg-emerald-700 transition-colors shadow-lg shadow-emerald-200 flex items-center gap-2",children:[e.jsx(q,{size:18})," Save Record"]})]})]})]})},Oe=({data:s})=>{const o=[...s].sort((t,d)=>new Date(t.date).getTime()-new Date(d.date).getTime()).slice(-7).map(t=>({date:new Date(t.date).toLocaleDateString("en-US",{weekday:"short",day:"numeric"}),mood:t.mood,intensity:t.moodIntensity}));return o.length===0?e.jsx("div",{className:"flex items-center justify-center h-64 bg-slate-50 rounded-xl border border-slate-200 text-slate-400",children:"No mood data yet. Start a check-in!"}):e.jsxs("div",{className:"h-64 w-full bg-white p-4 rounded-xl border border-slate-100 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-500 mb-4",children:"Mood Trend (Last 7 Days)"}),e.jsx(ae,{width:"100%",height:"100%",children:e.jsxs(ie,{data:o,children:[e.jsx(ne,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),e.jsx(oe,{dataKey:"date",tick:{fontSize:12,fill:"#94a3b8"},axisLine:!1,tickLine:!1,dy:10}),e.jsx(re,{domain:[1,5],ticks:[1,2,3,4,5],tickFormatter:t=>["Terrible","Bad","Okay","Good","Great"][t-1],width:50,tick:{fontSize:10,fill:"#94a3b8"},axisLine:!1,tickLine:!1}),e.jsx(le,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},cursor:{stroke:"#cbd5e1",strokeWidth:2}}),e.jsx(de,{type:"monotone",dataKey:"mood",stroke:"#0ea5e9",strokeWidth:3,dot:{r:4,fill:"#0ea5e9",strokeWidth:2,stroke:"#fff"},activeDot:{r:6}})]})})]})},De=({onComplete:s})=>{const[o,t]=c.useState(1),[d,n]=c.useState(""),[r,h]=c.useState(null),u=()=>{o===2&&!d.trim()||t(o+1)},a=()=>{r&&s(d||"Friend",r)};return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white max-w-lg w-full rounded-2xl shadow-xl overflow-hidden border border-slate-100",children:[e.jsx("div",{className:"h-1.5 bg-slate-100 w-full",children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-500 ease-out",style:{width:`${o/3*100}%`}})}),e.jsxs("div",{className:"p-8 md:p-12",children:[o===1&&e.jsxs("div",{className:"text-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:e.jsx(K,{size:32})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-800 mb-3",children:"Welcome to MindfulPath"}),e.jsx("p",{className:"text-slate-500 leading-relaxed mb-8",children:"Your safe space to track moods, challenge negative thoughts, and build resilience using Cognitive Behavioral Therapy (CBT)."}),e.jsxs("button",{onClick:u,className:"w-full py-3.5 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 flex items-center justify-center gap-2",children:["Get Started ",e.jsx(P,{size:18})]})]}),o===2&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"What should we call you?"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"We'll use this to personalize your dashboard."}),e.jsx("input",{type:"text",value:d,onChange:g=>n(g.target.value),placeholder:"Enter your name",className:"w-full p-4 text-lg border-2 border-slate-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all mb-8",autoFocus:!0,onKeyDown:g=>g.key==="Enter"&&d.trim()&&u()}),e.jsxs("button",{onClick:u,disabled:!d.trim(),className:"w-full py-3.5 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:["Continue ",e.jsx(P,{size:18})]})]}),o===3&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"How are you feeling right now?"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"Let's log your first check-in to start your journey."}),e.jsx("div",{className:"grid grid-cols-1 gap-3 mb-8",children:Object.entries(J).reverse().map(([g,x])=>{const f=Number(g),b=r===f;return e.jsxs("button",{onClick:()=>h(f),className:`flex items-center justify-between p-4 rounded-xl border-2 transition-all ${b?"border-blue-500 bg-blue-50 text-blue-700":"border-slate-100 hover:border-blue-200 hover:bg-slate-50 text-slate-600"}`,children:[e.jsx("span",{className:"font-medium",children:x}),e.jsx("div",{className:`w-4 h-4 rounded-full ${z[f]}`})]},g)})}),e.jsxs("button",{onClick:a,disabled:!r,className:"w-full py-3.5 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-all shadow-lg shadow-emerald-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(q,{size:18})," Finish Setup"]})]})]})]})})},Me=({isOpen:s,onClose:o})=>{const[t,d]=c.useState(""),[n,r]=c.useState(null);c.useEffect(()=>{if(s){const a=localStorage.getItem("gemini_api_key");r(a),d("")}},[s]);const h=()=>{t.trim()&&(localStorage.setItem("gemini_api_key",t.trim()),r(t.trim()),d(""))},u=()=>{localStorage.removeItem("gemini_api_key"),r(null)};return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 border border-slate-100",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-50",children:[e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Settings"}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors",children:e.jsx($,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-slate-700 flex items-center gap-2",children:[e.jsx(je,{size:18,className:"text-blue-500"})," Gemini API Key"]}),n?e.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-lg p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 text-sm font-medium",children:[e.jsx(fe,{size:16}),e.jsx("span",{children:"Custom API Key is active"})]}),e.jsx("button",{onClick:u,className:"p-1.5 text-emerald-600 hover:bg-emerald-100 rounded-md transition-colors",title:"Remove Key",children:e.jsx(Re,{size:16})})]}):e.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-lg p-3 flex gap-3",children:[e.jsx(Se,{size:16,className:"text-slate-400 shrink-0 mt-0.5"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Using system default key. You can provide your own key to ensure service continuity or use higher limits."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-slate-600 block",children:n?"Update API Key":"Enter Custom API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:t,onChange:a=>d(a.target.value),placeholder:"AIzaSy...",className:"flex-1 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none text-white placeholder-slate-400"}),e.jsx("button",{onClick:h,disabled:!t.trim(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Save"})]}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Your key is stored locally in your browser and used directly with the Gemini API."})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-50",children:[e.jsx("h4",{className:"font-semibold text-slate-700 mb-2 text-sm",children:"About MindfulPath"}),e.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed",children:["MindfulPath helps you track your mood and challenge negative thoughts using CBT principles.",e.jsx("br",{}),"Version 1.0.0"]})]})]})]})}):null},Le=()=>{const[s,o]=c.useState("dashboard"),[t,d]=c.useState(!1),[n,r]=c.useState(""),[h,u]=c.useState(!1),[a,g]=c.useState(()=>{const l=localStorage.getItem("mindfulpath_data");if(l)try{const m=JSON.parse(l),j=m.thoughtRecords&&m.thoughtRecords.length>0;return{...m,thoughtRecords:m.thoughtRecords||[],journalEntries:m.journalEntries||[],hasCompletedOnboarding:m.hasCompletedOnboarding??j}}catch(m){console.error("Failed to load save data",m)}return{thoughtRecords:[],journalEntries:[],userName:"",hasCompletedOnboarding:!1}});c.useEffect(()=>{localStorage.setItem("mindfulpath_data",JSON.stringify(a))},[a]),c.useEffect(()=>{a.hasCompletedOnboarding&&(async()=>{const m=await Ae("neutral");r(m)})()},[a.hasCompletedOnboarding]);const x=(l,m)=>{const j={id:Date.now().toString(),date:new Date().toISOString(),situation:"Started my MindfulPath journey",mood:m,moodIntensity:50,automaticThought:"I'm curious to see how this tool can help me.",evidenceFor:"",evidenceAgainst:"",cognitiveDistortions:[],balancedThought:"Taking the first step towards mental well-being is a positive action."};g({userName:l,thoughtRecords:[j],journalEntries:[],hasCompletedOnboarding:!0})},f=l=>{g(m=>({...m,thoughtRecords:[l,...m.thoughtRecords]})),o("dashboard")},b=()=>a.thoughtRecords.length===0?0:(a.thoughtRecords.slice(0,7).reduce((m,j)=>m+j.mood,0)/Math.min(a.thoughtRecords.length,7)).toFixed(1);if(!a.hasCompletedOnboarding)return e.jsx(De,{onComplete:x});const N=({view:l,icon:m,label:j})=>e.jsxs("button",{onClick:()=>{o(l),d(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium mb-1
        ${s===l?"bg-blue-50 text-blue-700 shadow-sm":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[e.jsx(m,{size:20}),j]});return e.jsxs("div",{className:"min-h-screen flex bg-[#F8FAFC]",children:[e.jsx(Me,{isOpen:h,onClose:()=>u(!1)}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/20 z-40 lg:hidden backdrop-blur-sm",onClick:()=>d(!1)}),e.jsxs("aside",{className:`
        fixed lg:sticky top-0 left-0 z-50 h-screen w-72 bg-white border-r border-slate-100 p-6 flex flex-col transition-transform duration-300
        ${t?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-blue-200",children:e.jsx(K,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg text-slate-800 leading-tight",children:"MindfulPath"}),e.jsx("p",{className:"text-xs text-slate-400",children:"CBT Journal"})]})]}),e.jsxs("nav",{className:"flex-1 space-y-2",children:[e.jsx(N,{view:"dashboard",icon:ve,label:"Dashboard"}),e.jsx(N,{view:"new-record",icon:B,label:"Check In"}),e.jsx(N,{view:"history",icon:ye,label:"History"})]}),e.jsxs("div",{className:"mt-auto space-y-4",children:[e.jsxs("button",{onClick:()=>u(!0),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-medium mb-1 text-slate-600 hover:bg-slate-50 hover:text-slate-900",children:[e.jsx(ke,{size:20}),"Settings"]}),e.jsx("div",{className:"pt-2 border-t border-slate-100",children:e.jsxs("div",{className:"bg-indigo-50 rounded-xl p-4 border border-indigo-100",children:[e.jsxs("h4",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2 flex items-center gap-2",children:[e.jsx(Ce,{size:14})," Daily Prompt"]}),e.jsxs("p",{className:"text-sm text-indigo-800 leading-relaxed italic",children:['"',n||"Loading thought...",'"']})]})})]})]}),e.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[e.jsxs("header",{className:"h-16 lg:h-0 flex items-center justify-between px-4 lg:hidden bg-white border-b border-slate-100 sticky top-0 z-30",children:[e.jsx("div",{className:"font-bold text-slate-800",children:"MindfulPath"}),e.jsx("button",{onClick:()=>d(!t),className:"p-2 text-slate-600 hover:bg-slate-50 rounded-lg",children:t?e.jsx($,{}):e.jsx(we,{})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-8 scroll-smooth",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[s==="dashboard"&&e.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-slate-800",children:["Hello, ",a.userName]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"Here is your emotional overview for the week."})]}),e.jsxs("button",{onClick:()=>o("new-record"),className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-medium shadow-lg shadow-blue-200 hover:bg-blue-700 transition-all active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(B,{size:20})," New Entry"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("div",{className:"text-slate-400 text-sm font-medium mb-2",children:"Total Entries"}),e.jsx("div",{className:"text-4xl font-bold text-slate-800",children:a.thoughtRecords.length})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("div",{className:"text-slate-400 text-sm font-medium mb-2",children:"Avg. Mood (7 Days)"}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("div",{className:"text-4xl font-bold text-slate-800",children:b()}),e.jsx("div",{className:"text-slate-400 text-sm mb-1",children:"/ 5.0"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-6 rounded-2xl shadow-lg text-white",children:[e.jsx("div",{className:"text-indigo-100 text-sm font-medium mb-2",children:"Insight"}),e.jsx("p",{className:"text-sm font-medium leading-relaxed opacity-90",children:`"You've been tracking consistently. Noticing patterns is the first step to change."`})]})]}),e.jsx(Oe,{data:a.thoughtRecords}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Recent Thoughts"}),e.jsx("button",{onClick:()=>o("history"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View All"})]}),e.jsx("div",{className:"divide-y divide-slate-50",children:a.thoughtRecords.length===0?e.jsx("div",{className:"p-8 text-center text-slate-400",children:'No records yet. Click "New Entry" to start.'}):a.thoughtRecords.slice(0,3).map(l=>e.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-400",children:new Date(l.date).toLocaleDateString()}),e.jsx("div",{className:`w-3 h-3 rounded-full ${z[l.mood]}`})]}),e.jsx("h4",{className:"font-semibold text-slate-800 mb-1",children:l.situation}),e.jsx("p",{className:"text-slate-500 text-sm line-clamp-2",children:l.balancedThought||l.automaticThought}),l.aiAnalysis&&e.jsxs("div",{className:"mt-3 inline-flex items-center gap-1.5 px-2.5 py-1 rounded-md bg-indigo-50 text-indigo-700 text-xs font-medium",children:[e.jsx(A,{size:12})," AI Analyzed"]})]},l.id))})]})]}),s==="new-record"&&e.jsx("div",{className:"animate-in slide-in-from-bottom-8 fade-in duration-500",children:e.jsx(ze,{onSave:f,onCancel:()=>o("dashboard")})}),s==="history"&&e.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"History"})}),e.jsx("div",{className:"grid gap-4",children:a.thoughtRecords.length===0?e.jsx("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-100 text-slate-400",children:"No history found."}):a.thoughtRecords.map(l=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${z[l.mood]}`,children:l.mood}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:l.situation}),e.jsx("p",{className:"text-xs text-slate-400",children:new Date(l.date).toLocaleString()})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{className:"bg-rose-50 p-4 rounded-lg border border-rose-100",children:[e.jsx("span",{className:"block text-xs font-bold text-rose-700 uppercase mb-2",children:"Negative Thought"}),e.jsx("p",{className:"text-slate-700",children:l.automaticThought}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:l.cognitiveDistortions.map(m=>e.jsx("span",{className:"bg-white/80 text-rose-800 px-2 py-0.5 rounded text-xs",children:m},m))})]}),e.jsxs("div",{className:"bg-emerald-50 p-4 rounded-lg border border-emerald-100",children:[e.jsx("span",{className:"block text-xs font-bold text-emerald-700 uppercase mb-2",children:"Balanced Thought"}),e.jsx("p",{className:"text-slate-700",children:l.balancedThought||"No balanced thought recorded."})]})]})]},l.id))})]})]})})]})]})},H=document.getElementById("root");if(!H)throw new Error("Could not find root element to mount to");const Ee=ge.createRoot(H);Ee.render(e.jsx(ce.StrictMode,{children:e.jsx(Le,{})}));
